"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3145],{3145:(y,c,n)=>{n.r(c),n.d(c,{AuthModule:()=>M});var g=n(1558),a=n(7504),t=n(6353);let u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],decls:1,vars:0,template:function(o,s){1&o&&t._UZ(0,"ion-router-outlet")},dependencies:[g.jP],encapsulation:2}),e})();var r=n(4006),h=n(7525),p=n(6526),f=n(3714),m=n(6895),v=n(8490);function A(e,l){if(1&e&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,o.errorMessage)," ")}}const C=[{path:"",component:u,children:[{path:"",component:(()=>{class e{constructor(o,s,i,L,b){this.fb=o,this.authService=s,this.router=i,this.global=L,this.settingsApi=b}ngOnInit(){window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),this.deferredPrompt=o,this.showInstallPromotion(),console.log("'beforeinstallprompt' event was fired.")}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,console.log("PWA was installed")}),this.loading=!1,this.loginForm=this.fb.group({username:["",[r.kI.required]],password:["",[r.kI.required]]})}login(){this.loading=!0,this.showInstallPromotion(),this.authService.login(this.loginForm.get("username").value,this.loginForm.get("password").value).subscribe(o=>{const s={...o.user,groups:"user",role:"user"};this.authService.currentUserSubject.next(s),this.authService.currentUserToken.next(o.token),h.H.user.includes(s.role)?this.router.navigateByUrl("/user"):this.router.navigate(["auth"]),this.loading=!1},o=>{this.loading=!1,this.errorMessage="invalid username or password"})}changeLanguage(){this.settingsApi.changeLanguage()}showInstallPromotion(){null!=this.deferredPrompt&&(console.log("showInstallPromotion"),this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(o=>{"accepted"===o.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),this.deferredPrompt=null}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.$h),t.Y36(a.F0),t.Y36(p.Uh),t.Y36(f.p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:24,vars:21,consts:[[1,"page-container","login"],[1,"cairo-bold","text-center"],[1,"logo","d-flex","align-items-center","justify-content-center","mb-3"],["src","./assets/images/logo.png"],[1,"text-msg","text-center","px-4","cairo-light","mb-0"],[1,"mt-5","mb-5",3,"formGroup"],[1,"form-group","mb-3"],["type","text","formControlName","username",1,"form-control","input-lg",3,"placeholder"],["class","text-danger my-2 d-block",4,"ngIf"],[1,"form-group"],["type","password","formControlName","password",1,"form-control","input-lg",3,"placeholder"],[1,"mt-5"],[1,"btn","btn-primary","btn-block","w-100","btn-lg","border-radius-16","main-color-bg","main-btn",3,"disabled","click"],[1,"d-block","main-color","mt-3","text-center","w-100",3,"click"],[1,"text-danger","my-2","d-block"]],template:function(o,s){1&o&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"img",3),t.qZA(),t.TgZ(6,"p",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"form",5)(10,"div",6),t._UZ(11,"input",7),t.ALo(12,"translate"),t.YNc(13,A,3,3,"span",8),t.qZA(),t.TgZ(14,"div",9),t._UZ(15,"input",10),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11)(18,"button",12),t.NdJ("click",function(){return s.login()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"span",13),t.NdJ("click",function(){return s.changeLanguage()}),t._uU(22),t.ALo(23,"translate"),t.qZA()()()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,9,"welcome!")," "),t.xp6(5),t.hij(" ",t.lcZ(8,11,"Please provide the following information to access your account")," "),t.xp6(2),t.Q6J("formGroup",s.loginForm),t.xp6(2),t.s9C("placeholder",t.lcZ(12,13,"Username")),t.xp6(2),t.Q6J("ngIf",s.errorMessage),t.xp6(2),t.s9C("placeholder",t.lcZ(16,15,"Password")),t.xp6(3),t.Q6J("disabled",s.loginForm.invalid),t.xp6(1),t.hij(" ",t.lcZ(20,17,"Login")," "),t.xp6(3),t.Oqu(t.lcZ(23,19,"Change language")))},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,v.X$],styles:[".login[_ngcontent-%COMP%]{background-color:#f6f8fc;min-height:100%}.login[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1c1937;margin-top:5rem!important;letter-spacing:2px;line-height:150%}.login[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{color:#1c1937}.login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:100px}.login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;object-fit:contain}"]}),e})(),pathMatch:"full"}]}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.Bz.forChild(C),a.Bz]}),e})();var Z=n(2234),x=n(5247);let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,g.Pc,P,r.UX,r.u5,Z.m,x.m]}),e})()}}]);