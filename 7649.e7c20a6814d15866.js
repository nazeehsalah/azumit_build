"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7649],{7649:(G,m,i)=>{i.r(m),i.d(m,{ProductsModule:()=>X});var s=i(6895),a=i(7504),t=i(6353),d=i(2340),g=i(6526);let u=(()=>{class n{constructor(o,e){this.global=o,this.auth=e,this.api=`${d.N.callMethod}${d.N.modules.productTemplate}`,this.pricingApi=`${d.N.callMethod}${d.N.modules.productPricing}`,this.reportsApi=`${d.N.callMethod}${d.N.modules.productReports}`,this.fields=["name","description","dtd","wtd","mtd","qtd","ytd","ytd2","ytd3","ytd4"]}getAllProducts(){return this.global.post(`${this.api}search_read`,{paramlist:{filters:[["type","=","financial"]],need:[...this.fields]}})}getProduct(o){return this.global.post(`${this.api}search_read`,{paramlist:{filters:[["type","=","financial"],["id","=",o]],need:[...this.fields]}})}getProductPricing(o){return this.global.post(`${this.pricingApi}search_read`,{paramlist:{filters:[["product_price.id","=",o]]}})}getProductReports(o){return this.global.post(`${this.reportsApi}search_read`,{paramlist:{filters:[["product_reports.id","=",o]]}})}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(g.Uh),t.LFG(g.$h))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=i(1558),l=i(1774),P=i(9514),A=i(9197),_=i(8490);function I(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div",8)(1,"app-product-item",9),t.NdJ("doClick",function(r){t.CHM(o);const f=t.oxw();return t.KtG(f.openProduct(r))}),t.qZA()()}if(2&n){const o=c.$implicit;t.xp6(1),t.Q6J("product",o)}}function T(n,c){1&n&&t._UZ(0,"app-no-data")}let v=(()=>{class n{constructor(o,e){this.productService=o,this.route=e,this.productsList=[]}ngOnInit(){this.productService.getAllProducts().subscribe(o=>{this.productsList=o.data})}openProduct(o){this.route.navigateRoot(`/user/products/info/${o.id}`)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(u),t.Y36(p.SH))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:10,vars:7,consts:[[3,"title","backUrl"],[1,"page-container-bg"],[1,"page-container"],[1,"mb-0"],[1,"mb-3","hr"],[1,"row"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12","col-md-6","col-lg-4"],[3,"product","doClick"]],template:function(o,e){1&o&&(t._UZ(0,"app-back-header",0),t.TgZ(1,"ion-content",1)(2,"div",2)(3,"h5",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"div",4),t.TgZ(7,"div",5),t.YNc(8,I,2,1,"div",6),t.qZA(),t.YNc(9,T,1,0,"app-no-data",7),t.qZA()()),2&o&&(t.Q6J("title","Products")("backUrl","/user"),t.xp6(4),t.Oqu(t.lcZ(5,5,"Products List")),t.xp6(4),t.Q6J("ngForOf",e.productsList),t.xp6(1),t.Q6J("ngIf",0===e.productsList.length))},dependencies:[s.sg,s.O5,l.q,P.d,A.V,p.W2,_.X$]}),n})();var C=i(567),b=i(6899),O=i(8284);function y(n,c){if(1&n&&(t.TgZ(0,"div",12),t._UZ(1,"app-info",6),t.ALo(2,"translate"),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("title",t.lcZ(2,2,"Price Date"))("value",o.pricingObj.date_to)}}function U(n,c){if(1&n&&(t.TgZ(0,"div",12),t._UZ(1,"app-info",6),t.ALo(2,"translate"),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("title",t.lcZ(2,2,"Unit Price"))("value",o.pricingObj.price+" EGP")}}function q(n,c){1&n&&(t.TgZ(0,"div",13)(1,"p",14),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"No pricing Information")))}function L(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"Day")),t.xp6(3),t.Oqu(o.product.dtd)}}function J(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"Week")),t.xp6(3),t.Oqu(o.product.wtd)}}function M(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"Month")),t.xp6(3),t.Oqu(o.product.mtd)}}function N(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Quarter")," "),t.xp6(3),t.Oqu(o.product.qtd)}}function Y(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"Year")),t.xp6(3),t.Oqu(o.product.ytd)}}function R(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Year 2")," "),t.xp6(3),t.Oqu(o.product.ytd2)}}function Q(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Year 3")," "),t.xp6(3),t.Oqu(o.product.ytd3)}}function S(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA()()),2&n){const o=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"Year 4")," "),t.xp6(3),t.Oqu(o.product.ytd4)}}function $(n,c){if(1&n&&(t.TgZ(0,"div",5)(1,"h5",15),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"div",16),t.TgZ(5,"div",17),t.YNc(6,L,6,4,"div",18),t.YNc(7,J,6,4,"div",18),t.YNc(8,M,6,4,"div",18),t.YNc(9,N,6,4,"div",18),t.YNc(10,Y,6,4,"div",18),t.YNc(11,R,6,4,"div",18),t.YNc(12,Q,6,4,"div",18),t.YNc(13,S,6,4,"div",18),t.qZA()()),2&n){const o=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,9,"Performance Returns")),t.xp6(4),t.Q6J("ngIf",o.product.dtd),t.xp6(1),t.Q6J("ngIf",o.product.wtd),t.xp6(1),t.Q6J("ngIf",o.product.mtd),t.xp6(1),t.Q6J("ngIf",o.product.qtd),t.xp6(1),t.Q6J("ngIf",o.product.ytd),t.xp6(1),t.Q6J("ngIf",o.product.ytd2),t.xp6(1),t.Q6J("ngIf",o.product.ytd3),t.xp6(1),t.Q6J("ngIf",o.product.ytd4)}}function w(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.openReports())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Report")," "))}function j(n,c){if(1&n&&(t.TgZ(0,"section",3)(1,"div",4)(2,"div",5),t._UZ(3,"app-info",6),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",5),t._UZ(6,"app-info",6),t.ALo(7,"translate"),t.ALo(8,"falsePipe"),t.qZA(),t.YNc(9,y,3,4,"div",7),t.YNc(10,U,3,4,"div",7),t.YNc(11,q,4,3,"div",8),t.YNc(12,$,14,11,"div",9),t.qZA(),t.TgZ(13,"div",10),t.YNc(14,w,3,3,"button",11),t.qZA()()),2&n){const o=t.oxw();t.xp6(3),t.Q6J("title",t.lcZ(4,9,"Product Name"))("value",o.product.name),t.xp6(3),t.Q6J("title",t.lcZ(7,11,"Product Description"))("value",t.lcZ(8,13,o.product.description)),t.xp6(3),t.Q6J("ngIf",o.pricingObj),t.xp6(1),t.Q6J("ngIf",o.pricingObj),t.xp6(1),t.Q6J("ngIf",!o.pricingObj),t.xp6(1),t.Q6J("ngIf",o.product.dtd||o.product.wtd||o.product.mtd||o.product.qtd||o.product.ytd||o.product.ytd2||o.product.ytd3||o.product.ytd4),t.xp6(2),t.Q6J("ngIf",o.includeReports)}}let h=(()=>{class n{constructor(o,e,r){this.productService=o,this.activeRouter=e,this.router=r,this.dataLoaded=!1,this.includeReports=!1}ngOnInit(){this.productId=this.activeRouter.snapshot.paramMap.get("id"),this.productService.getProduct(this.productId).subscribe(o=>{this.product=o.data[0],this.getPricingAndReports()})}getPricingAndReports(){(0,C.D)({pricing:this.productService.getProductPricing(this.productId),reports:this.productService.getProductReports(this.productId)}).subscribe(o=>{const e=o.pricing.data.sort((r,f)=>Date.parse(f.date_from)-Date.parse(r.date_from));this.pricingObj=e.length>0?e[0]:void 0,this.dataLoaded=!0,this.includeReports=o.reports.data.length>0})}openReports(){this.router.navigateRoot(`/user/products/info/${this.productId}/reports`)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(u),t.Y36(a.gz),t.Y36(p.SH))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-info"]],decls:3,vars:3,consts:[[3,"title","backUrl"],[1,"page-container-bg"],["class","page-container",4,"ngIf"],[1,"page-container"],[1,"row"],[1,"col-12"],[3,"title","value"],["class","col-6",4,"ngIf"],["class","col-12 mt-3",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"mt-3"],["class","btn btn-primary btn-block w-100 btn-lg border-radius-16 main-color-bg main-btn",3,"click",4,"ngIf"],[1,"col-6"],[1,"col-12","mt-3"],[1,"text-center"],[1,"mb-0","main-color"],[1,"mb-3","hr"],[1,"performance"],["class","item py-2 d-flex",4,"ngIf"],[1,"item","py-2","d-flex"],[1,"col-6","label","gray1-color"],[1,"col-6","value"],[1,"btn","btn-primary","btn-block","w-100","btn-lg","border-radius-16","main-color-bg","main-btn",3,"click"]],template:function(o,e){1&o&&(t._UZ(0,"app-back-header",0),t.TgZ(1,"ion-content",1),t.YNc(2,j,15,15,"section",2),t.qZA()),2&o&&(t.Q6J("title","Product Information")("backUrl","/user/products"),t.xp6(2),t.Q6J("ngIf",e.dataLoaded))},dependencies:[s.O5,l.q,b.O,p.W2,O._,_.X$],styles:[".performance[_ngcontent-%COMP%]{background:#fff;padding:.5rem;border-radius:16px}.performance[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.performance[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{line-height:200%;padding:0 .25rem;text-transform:capitalize}.performance[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--ion-color-primary);line-height:200%}"]}),n})(),x=(()=>{class n{constructor(o,e){this.activeRouter=o,this.productService=e}ngOnInit(){this.productId=this.activeRouter.snapshot.paramMap.get("id"),this.productService.getProductReports(this.productId).subscribe(o=>{})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(a.gz),t.Y36(u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-reports"]],decls:1,vars:2,consts:[[3,"title","backUrl"]],template:function(o,e){1&o&&t._UZ(0,"app-back-header",0),2&o&&t.Q6J("title","Product Report")("backUrl","/user/products/info/"+e.productId)},dependencies:[l.q]}),n})();const F=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"ion-router-outlet")},dependencies:[p.jP]}),n})(),children:[{path:"",component:v,pathMatch:"full"},{path:"info/:id",component:h,pathMatch:"full"},{path:"info/:id/reports",component:x,pathMatch:"full"}]}];let k=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Bz.forChild(F),a.Bz]}),n})();var z=i(2234),D=i(5247);let X=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,k,z.m,p.Pc,D.m]}),n})()}}]);